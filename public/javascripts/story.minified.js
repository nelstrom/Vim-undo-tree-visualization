(function(){var d,w,k,c,p,x,q,r,s,y,t,n,m,i,f,z,o,j,A,B,C,D,u,E,F,v,G=Array.prototype.slice;d=function(){function a(b){var e,g,h,l;this.timelineOriginal=b.timelineOriginal.points.split(",");this.timelineRevised=b.timelineRevised.points.split(",");this.activeTrack=b.timelineRevised.active?"timelineRevised":"timelineOriginal";this.nodes=[];l=b.nodes||[{position:"s1"}];g=0;for(h=l.length;g<h;g++){e=l[g];b={state:e.state,position:e.position};this.nodes.push(b);if(e.state==="on")this.activeNode=b}a.states.push(this)}
a.prototype.activeNodeIndex=function(){return this.nodes.indexOf(this.activeNode)};a.prototype.hasPredecessor=function(){return a.states.indexOf(this)>0};a.prototype.hasSuccessor=function(){return a.states.indexOf(this)<a.states.length-1};a.states=[];a.position=0;a.lastPosition=0;a.active=function(){return this.states[this.position]};a.previous=function(){return this.states[this.lastPosition]};a.reverse=function(){if(this.position>0){this.lastPosition=this.position;return this.position--}};a.advance=
function(){if(this.position<this.states.length-1){this.lastPosition=this.position;return this.position++}};a.reset=function(){this.lastPosition=this.position=0;return this.states=[]};return a}();window.DocumentState=d;new d({timelineOriginal:{points:"s1",active:true},timelineRevised:{points:"s1"},nodes:[{position:"s1",state:"on"},{position:"s1"},{position:"s1"},{position:"s1"},{position:"s1"},{position:"s1"}]});new d({timelineOriginal:{points:"s1,s2",active:true},timelineRevised:{points:"s1,s2"},
nodes:[{position:"s1",state:"off"},{position:"s2",state:"on"},{position:"s2"},{position:"s2"},{position:"s2"},{position:"s2"}]});new d({timelineOriginal:{points:"s1,s2,s3",active:true},timelineRevised:{points:"s1,s2,s3"},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"s3",state:"on"},{position:"s3"},{position:"s3"},{position:"s3"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4",active:true},timelineRevised:{points:"s1,s2,s3,s4"},nodes:[{position:"s1",state:"off"},{position:"s2",
state:"off"},{position:"s3",state:"off"},{position:"s4",state:"on"},{position:"s4"},{position:"s4"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4",active:true},timelineRevised:{points:"s1,s2"},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"s3",state:"on"},{position:"s4",state:"off"},{position:"s3"},{position:"s3"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4",active:true},timelineRevised:{points:"s1,s2"},nodes:[{position:"s1",state:"off"},{position:"s2",state:"on"},
{position:"s3",state:"off"},{position:"s4",state:"off"},{position:"s2"},{position:"s2"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"on"},{position:"t3"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t4",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},
{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"off"},{position:"t4",state:"on"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t4",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"on"},{position:"t4",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t4",active:true},nodes:[{position:"s1",
state:"off"},{position:"s2",state:"on"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"off"},{position:"t4",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t4",active:true},nodes:[{position:"s1",state:"on"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"off"},{position:"t4",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t4",
active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"on"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"off"},{position:"t4",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t4",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"on"},{position:"t4",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},
timelineRevised:{points:"s1,s2,t3,t4",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t3",state:"off"},{position:"t4",state:"on"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4"},timelineRevised:{points:"s1,s2,s5,s6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"s3",state:"off"},{position:"s4",state:"off"},{position:"s5",state:"off"},{position:"s6",state:"on"}]});
new d({timelineOriginal:{points:"s1,s2,s3,s4"},timelineRevised:{points:"s1,s2,s5,s6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"s3",state:"off"},{position:"s4",state:"off"},{position:"s5",state:"on"},{position:"s6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4"},timelineRevised:{points:"s1,s2,s5,s6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"s3",state:"off"},{position:"s4",state:"on"},{position:"s5",
state:"off"},{position:"s6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4"},timelineRevised:{points:"s1,s2,s5,s6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"s3",state:"on"},{position:"s4",state:"off"},{position:"s5",state:"off"},{position:"s6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4"},timelineRevised:{points:"s1,s2,s5,s6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"on"},{position:"s3",state:"off"},
{position:"s4",state:"off"},{position:"s5",state:"off"},{position:"s6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4"},timelineRevised:{points:"s1,s2,s5,s6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"s3",state:"on"},{position:"s4",state:"off"},{position:"s5",state:"off"},{position:"s6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,s3,s4"},timelineRevised:{points:"s1,s2,s5,s6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",
state:"off"},{position:"s3",state:"off"},{position:"s4",state:"on"},{position:"s5",state:"off"},{position:"s6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4",active:true},timelineRevised:{points:"s1,s2,t3,t5,t6"},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"on"},{position:"t5",state:"off"},{position:"t6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t5,t6",active:true},
nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t5",state:"on"},{position:"t6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},timelineRevised:{points:"s1,s2,t3,t5,t6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t5",state:"off"},{position:"t6",state:"on"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4"},
timelineRevised:{points:"s1,s2,t3,t5,t6",active:true},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t5",state:"on"},{position:"t6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4",active:true},timelineRevised:{points:"s1,s2,t3,t5,t6"},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"on"},{position:"t5",state:"off"},{position:"t6",state:"off"}]});
new d({timelineOriginal:{points:"s1,s2,b3,b4",active:true},timelineRevised:{points:"s1,s2,t3,t5,t6"},nodes:[{position:"s1",state:"off"},{position:"s2",state:"off"},{position:"b3",state:"on"},{position:"b4",state:"off"},{position:"t5",state:"off"},{position:"t6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4",active:true},timelineRevised:{points:"s1,s2,t3,t5,t6"},nodes:[{position:"s1",state:"off"},{position:"s2",state:"on"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t5",
state:"off"},{position:"t6",state:"off"}]});new d({timelineOriginal:{points:"s1,s2,b3,b4",active:true},timelineRevised:{points:"s1,s2,t3,t5,t6"},nodes:[{position:"s1",state:"on"},{position:"s2",state:"off"},{position:"b3",state:"off"},{position:"b4",state:"off"},{position:"t5",state:"off"},{position:"t6",state:"off"}]});m=Math.PI/6;k={black:"#444",darkgrey:"#888",white:"#fff"};j=null;c={};c.s1={x:90,y:150};c.s2={x:182,y:150};c.s3={x:274,y:150};c.s4={x:366,y:150};c.s5={x:458,y:150};c.s6={x:550,y:150};
c.b3={x:c.s2.x+92*Math.cos(m),y:c.s2.y+92*Math.sin(m)};c.b4={x:c.b3.x+92,y:c.b3.y};c.t3={x:c.s2.x+92*Math.cos(m),y:c.s2.y-92*Math.sin(m)};c.t4={x:c.t3.x+92,y:c.t3.y};c.t5={x:c.t3.x+184,y:c.t3.y};c.t6={x:c.t3.x+276,y:c.t3.y};f={timelineOriginalThick:null,timelineOriginalThin:null,timelineRevisedThick:null,timelineRevisedThin:null,activeTimeline:null,activeNode:null,nodes:[],nodeNumbers:[],thickLineAttributes:{stroke:k.darkgrey,"stroke-width":8,"stroke-linecap":"butt","stroke-linejoin":"miter"},thinLineAttributes:{stroke:k.white,
"stroke-width":7,"stroke-linecap":"butt","stroke-linejoin":"miter"},offNodeAttributes:{fill:k.white,stroke:k.black},onNodeAttributes:{fill:k.darkgrey,stroke:k.black}};w=["1955, November 12th\n    Lightning strikes the clocktower at 10.04pm","1955, November 5th\n    George McFly falls out of a tree and is hit by a car.\n\n1955, November 12th\n    Lightning strikes the clocktower at 10.04pm","1955, November 5th\n    George McFly falls out of a tree and is hit by a car.\n    Lorraine Baines nurses George, and thinks he's cute.\n\n1955, November 12th\n    Lightning strikes the clocktower at 10.04pm",
"1955, November 5th\n    George McFly falls out of a tree and is hit by a car.\n    Lorraine Baines nurses George, and thinks he's cute.\n\n1955, November 12th\n    George McFly takes Lorraine Baines to the dance, and they kiss.\n    Lighting strikes the clocktower at 10.04pm","1955, November 5th\n    Marty McFly is hit by a car.\n    Lorraine Baines nurses Marty, and thinks he's cute.\n\n1955, November 12th\n    Lighting strikes the clocktower at 10.04pm","1955, November 5th\n    Marty McFly is hit by a car.\n    Lorraine Baines nurses Marty, and thinks he's cute.\n\n1955, November 12th\n    Marty Mcfly takes Lorraine Baines to the dance, and they kiss (yuk).\n    Marty McFly invents Rock and Roll\n    George McFly and Loraine Baines kiss.\n    Lightning strikes the clocktower at 10.04pm"];
i=function(){var a,b,e,g,h;b=arguments[0];a=2<=arguments.length?G.call(arguments,1):[];e=["M "+c[b].x+" "+c[b].y];g=0;for(h=a.length;g<h;g++){b=a[g];e.push("L "+c[b].x+" "+c[b].y)}return e.join("")};t=function(a){f.timelineOriginalThick=j.path(i.apply(null,a.timelineOriginal)).attr(f.thickLineAttributes);f.timelineOriginalThin=j.path(i.apply(null,a.timelineOriginal)).attr(f.thinLineAttributes);f.timelineRevisedThick=j.path(i.apply(null,a.timelineRevised)).attr(f.thickLineAttributes);return f.timelineRevisedThin=
j.path(i.apply(null,a.timelineRevised)).attr(f.thinLineAttributes)};q=function(a,b){if(b==null)b=a.activeTrack;return f.activeTimeline=j.path(i.apply(null,a[b])).attr(f.thickLineAttributes)};r=function(a){var b,e,g,h;f.nodes=[];f.nodeNumbers=[];h=[];for(g=0;g<=5;g+=1){e=a.nodes[g];h.push(e.state!=null?(b=j.circle(c[e.position].x,c[e.position].y,15).attr(f.offNodeAttributes),f.nodes.push(b),s(e,g)):void 0)}return h};s=function(a,b){var e;e=j.text(c[a.position].x,c[a.position].y+30,b+1);return f.nodeNumbers.push(e)};
p=function(a){return f.activeNode=j.circle(c[a.activeNode.position].x,c[a.activeNode.position].y,15).attr(f.onNodeAttributes)};y=function(){var a;a=d.active();t(a);q(a);r(a);p(a);return v()};E=function(a,b){t(b);f.timelineOriginalThick.animate({path:i.apply(null,a.timelineOriginal)},250,"<>");f.timelineOriginalThin.animate({path:i.apply(null,a.timelineOriginal)},250,"<>");f.timelineRevisedThick.animate({path:i.apply(null,a.timelineRevised)},250,"<>");return f.timelineRevisedThin.animate({path:i.apply(null,
a.timelineRevised)},250,"<>")};C=function(a,b){var e;e=a.activeTrack;q(b,e);return f.activeTimeline.animate({path:i.apply(null,a[e])},250,"<>")};D=function(a,b){var e,g,h,l;r(b);l=[];for(h=0;h<=5;h+=1){g=a.nodes[h];e=f.nodes[h];if(e==null)break;e.animate({cx:c[g.position].x,cy:c[g.position].y},250,"<>");e=f.nodeNumbers[h];l.push(e.animate({x:c[g.position].x,y:c[g.position].y+30},250,"<>"))}return l};B=function(a,b){p(b);return f.activeNode.animate({cx:c[a.activeNode.position].x,cy:c[a.activeNode.position].y},
250,"<>",x)};x=function(){var a;a=d.active();return s(a.activeNode,a.activeNodeIndex())};u=function(){var a,b;j.clear();a=d.active();b=d.previous();E(a,b);C(a,b);D(a,b);B(a,b);return v()};v=function(){var a;a=d.active();return $("#vim-history-buffer code pre").html(w[a.activeNodeIndex()])};F=function(){return n()};A=function(){return o()};n=function(){if(d.active().hasPredecessor()){d.reverse();u();return false}};o=function(){if(d.active().hasSuccessor()){d.advance();u();return false}};z=function(a){var b,
e,g;b=(e=[39,40,32],e);e=(g=[37,38],g);b.indexOf(a.keyCode)>=0&&o();if(e.indexOf(a.keyCode)>=0)return n()};jQuery($(function(a,b){return function(){return a.apply(b,arguments)}}(function(){$("#vim-history-visualization").append('<div id="vim-history-buffer">\n  <code><pre></pre></code>\n</div>\n<div id="vim-history-graph"/>');$("#vim-history-buttons a.undo").click(F);$("#vim-history-buttons a.redo").click(A);$("#vim-history-buttons a.later").click(o);$("#vim-history-buttons a.earlier").click(n);$(window).keydown(z);
j=Raphael("vim-history-graph",640,300);return y()},this)));window.graphics=f}).call(this);
